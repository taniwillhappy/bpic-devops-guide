<script setup>
import { RouterLink, RouterView, useRoute } from 'vue-router' // ‡πÄ‡∏û‡∏¥‡πà‡∏° useRoute
import { ref, computed } from 'vue' // ‡πÄ‡∏û‡∏¥‡πà‡∏° computed
import './assets/sidebar.css'
import './assets/footer.css'

const route = useRoute()
const isCollapsed = ref(false)
const isMobileMenuOpen = ref(false)

// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Route ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö Backend ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
const isBackendOpen = computed(() => {
  return route.path.includes('create_crud_backend')
})

// ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡∏ô‡πâ‡∏≤ Frontend
const isFrontendOpen = computed(() => {
  return route.path.includes('create_crud_frontend')
})

const closeMobileMenu = () => {
  isMobileMenuOpen.value = false
}
</script>

<template>
  <!-- navbar sidebar -->
  <div class="app-layout">
    <button class="mobile-toggle-btn" @click="isMobileMenuOpen = !isMobileMenuOpen"> ‚ò∞ </button>

    <aside :class="['sidebar', { 'collapsed': isCollapsed, 'mobile-active': isMobileMenuOpen }]">
      <div class="sidebar-logo">
        <button class="toggle-btn desktop-only" @click="isCollapsed = !isCollapsed">
          {{ isCollapsed ? '>' : '<' }}
        </button>
        <span v-if="!isCollapsed" class="logo-text">DevOps Guide</span>
      </div>
      <nav class="sidebar-menu">
        <router-link to="/" class="menu-item" active-class="active" @click="closeMobileMenu">
          <span class="icon">üè†</span>
          <span v-if="!isCollapsed" class="text">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤</span>
        </router-link>
        <router-link to="/nodered" class="menu-item" active-class="active" @click="closeMobileMenu">
          <span class="icon">ü§ñ</span>
          <span v-if="!isCollapsed" class="text">Node-Red</span>
        </router-link>
        <router-link to="/nodejs_ubuntu" class="menu-item" active-class="active" @click="closeMobileMenu">
          <span class="icon">üü¢</span>
          <span v-if="!isCollapsed" class="text">Node.js (Ubuntu)</span>
        </router-link>
        <router-link to="/nodejs_windows" class="menu-item" active-class="active" @click="closeMobileMenu">
          <span class="icon">üü¶</span>
          <span v-if="!isCollapsed" class="text">Node.js (Windows)</span>
        </router-link>
        <router-link to="/ubuntuserver" class="menu-item" active-class="active" @click="closeMobileMenu">
          <span class="icon">üêß</span>
          <span v-if="!isCollapsed" class="text">‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö<br>Ubuntu Server</span>
        </router-link>
        <router-link to="/docker" class="menu-item" active-class="active" @click="closeMobileMenu">
          <span class="icon">üê≥</span>
          <span v-if="!isCollapsed" class="text">‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Docker</span>
        </router-link>
        <router-link to="/vite_example" class="menu-item" active-class="active" @click="closeMobileMenu">
          <span class="icon">‚ö°</span>
          <span v-if="!isCollapsed" class="text">‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Vite</span>
        </router-link>
        <router-link to="/nuxt_example" class="menu-item" active-class="active" @click="closeMobileMenu">
          <span class="icon">‚õ∞Ô∏è</span>
          <span v-if="!isCollapsed" class="text">‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Nuxt</span>
        </router-link>
        <router-link to="/postgres" class="menu-item" active-class="active" @click="closeMobileMenu">
          <span class="icon">üêò</span>
          <span v-if="!isCollapsed" class="text">‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô PostgresSQL <br>‡∏î‡πâ‡∏ß‡∏¢ DBeaver</span>
        </router-link>
        <router-link to="/postman" class="menu-item" active-class="active" @click="closeMobileMenu">
          <span class="icon">üöÄ</span>
          <span v-if="!isCollapsed" class="text">‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Postman <br>‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô Backend</span>
        </router-link>

        <!-- Backend -->
        <div class="menu-group">
          <router-link to="/create_crud_backend" class="menu-item" active-class="active" @click="closeMobileMenu">
            <span class="icon">üìë</span>
            <span v-if="!isCollapsed" class="text">‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ CRUD <br>(Backend)</span>
          </router-link>

          <div v-if="isBackendOpen && !isCollapsed" class="submenu">
            <router-link to="/create_crud_backend_2" class="menu-item submenu-item" active-class="active" @click="closeMobileMenu">
              <span class="text">‡∏´‡∏ô‡πâ‡∏≤ 2: ‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏£‡∏Å</span>
            </router-link>
          </div>
        </div>

        <!-- Frontend -->
        <div class="menu-group">
          <router-link to="/create_crud_frontend" class="menu-item" active-class="active" @click="closeMobileMenu">
            <span class="icon">üìñ</span>
            <span v-if="!isCollapsed" class="text">‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ CRUD <br>(Frontend)</span>
          </router-link>

          <div v-if="isFrontendOpen && !isCollapsed" class="submenu">
            <div class="menu-item submenu-item" style="opacity: 0.6;">
              <span class="icon">‚ú®</span>
              <span class="text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°...</span>
            </div>
          </div>
        </div>

        <router-link to="/file_download" class="menu-item" active-class="active" @click="closeMobileMenu">
          <span class="icon">üì•</span>
          <span v-if="!isCollapsed" class="text">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ CRUD</span>
        </router-link>
        <router-link to="/about" class="menu-item" active-class="active" @click="closeMobileMenu">
          <span class="icon">üë•</span>
          <span v-if="!isCollapsed" class="text">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥</span>
        </router-link>
      
      </nav>
    </aside>

    <div v-if="isMobileMenuOpen" class="sidebar-overlay" @click="isMobileMenuOpen = false"></div>

    <main :class="['main-content', { 'expanded': isCollapsed }]">
      <div class="content-area">
        <RouterView />
      </div>
      <footer class="footer-section">
        <div class="footer-content">
          <div class="footer-brand">
            <p>‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÇ‡∏î‡∏¢ ‡∏ô‡∏≤‡∏¢‡πÅ‡∏ó‡∏ô‡∏ö‡∏∏‡∏ç ‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏†‡∏±‡∏ó‡∏£‡πÄ‡∏Å‡∏©‡∏° ‡πÅ‡∏•‡∏∞ ‡∏ô‡∏≤‡∏¢‡∏Å‡∏£‡∏µ‡∏ò‡∏≤ ‡∏à‡∏∏‡∏°‡∏û‡∏•‡∏≤ | ‡πÅ‡∏ú‡∏ô‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏® | ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏ú‡πà</p>
          </div>
        </div>
      </footer>
      
    </main>
  </div>
      
 

</template>

<style scoped>
/* ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏ü‡∏•‡πå CSS ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡∏°‡∏≤ */
</style>
